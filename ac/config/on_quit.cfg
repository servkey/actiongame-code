// Adds a list of aliases to be deleted (cleared from saved.cfg) on every quit.
// Do not modify. (unless you really know what you're doing)

tmpClientList = "curname LANG nickhighlight soundqualityalias dyngamma __gibsgore gfxqualityalias poniesmodeon old_editbinds"
tmpSurvList   = "survMaxBots survDifficulty timeBetChkPts survNumBots nonSurvDefaults survBotsToAdd timeUntilTele survMap spamSurvMsgs"

addOnQuit [
  persistidents 1
  tmpClientData = ""; tmpSurvData = ""
  loop cql (listlen $tmpClientList) [ add2list tmpClientData (getalias (at $tmpClientList $cql))) ]
  loop oql (listlen $tmpSurvList) [ add2list tmpSurvData (getalias (at $tmpSurvList $oql)) ]
]

add2alias afterinit [
  sleep 10 [
    if (&& (checkalias tmpClientData) (= (listlen $tmpClientData) (listlen $tmpClientList))) [
      loop cil (listlen $tmpClientData) [ (at $tmpClientList $cil) = (at $tmpClientData $cil) ]
    ]
    if (&& (checkalias tmpSurvData) (= (listlen $tmpSurvData) (listlen $tmpSurvList))) [
      loop ail (listlen $tmpSurvData) [ (at $tmpSurvList $ail) = (at $tmpSurvData $ail) ]
    ]
  ] 1
]

addListOnQuit = [ alias_list = $arg1; loop al (listlen $alias_list) [ addOnQuit (concat "delalias" (at $alias_list $al)) ] ]

on_quit_aliases = [
  _demofile
  badargs
  cmapp
  cs_sets
  cs_newsets
  i
  len
  modifier
  numcla
  numrvsf
  omit_idents
  r
  s
  sbdesc
  sbdns
  sbport
  tmpCCO
  tmp_botmap
  tmp_botskill
  tmp_cl
  tmp_cradius
  tmp_ff
  tmp_gamma_list
  tmp_hex
  tmp_mode
  tmp_mrem
  tmp_numargs
  tmp_numbots
  tmp_old_sets
  tmp_sum
  tmp_svol
  tmp_tutsets
  tmp_wc
  watchingtutorial
  addListOnQuit
  on_quit_aliases
]

addListOnQuit $on_quit_aliases
addListOnQuit (concat $tmpClientList $tmpSurvList)
addOnQuit [ delalias alias_list ]