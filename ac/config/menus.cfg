// check for an installed mappack
alias mappack_version 0; alias mappack_maps ""; alias mappack_flagmaps ""
exec config/menus_mappack.cfg

// standard menu definitions

newmenu main

menuitem "Multiplayer"			"showmenu multiplayer"
menuitem "Singleplayer"			"showmenu singleplayer"
menuitem "Settings"			"showmenu settings"
menuitem "Demo"				[ showmenu "Play demo" ]
menuitem "Editing" 			"showmenu editing"
menuitem "Help"				"showmenu help"
menuitem "About"			"showmenu about"
menuitem "Quit"				"savequit"


// Start maps.

alias genmapitems [
    alias n (listlen $arg1)
    loop i $n [
        alias listmapname (at $arg1 $i)
        menuitem $listmapname (concat map $listmapname)
        alias next (+ $i 1)
        if (= $next $n) [ alias next 0 ] []
        alias nextmap (at $arg1 $next)
        alias (concatword nextmap_ $listmapname) $nextmap
    ]
]
newmenu maps
// Add maps to the below list to include them in the normal map menu (also for botmaps).
// Don't add ac_depot_classic to the maps list.
alias defaultmaps "ac_aqueous ac_arctic ac_complex ac_depot ac_desert ac_desert2 ac_desert3 ac_douze ac_elevation ac_gothic ac_keller ac_mines ac_power ac_scaffold ac_shine ac_snow ac_sunset ac_toxic ac_urban"
genmapitems	$defaultmaps
menuitem	"" -1
if (&& $mappack_version (listlen $mappack_maps)) [menuitem (concatword "Map-pack (version " $mappack_version ") maps...") [showmenu "mappack maps"]];
menuitem	"Show all maps..." [ showmenu "all maps" ]

newmenu "all maps"
menudirlist "packages/maps" "cgz" "map $arg1"


newmenu maps_flags 
// Add maps to the below list to include them in the CTF, KTF & TKTF map menu. Maps should contain flags here.
alias ctfmaps "ac_aqueous ac_depot ac_desert3 ac_douze ac_elevation ac_gothic ac_keller ac_mines ac_power ac_shine ac_sunset ac_urban"
genmapitems $ctfmaps
menuitem "" -1
if (&& $mappack_version (listlen $mappack_flagmaps)) [menuitem (concatword "Map-pack (version " $mappack_version ") maps...") [showmenu "mappack flag maps"]];
menuitem "Show all maps.." [showmenu "all maps"]


if $mappack_version [
    newmenu "mappack maps"
    genmapitems $mappack_maps
    newmenu "mappack flag maps"
    genmapitems $mappack_flagmaps
]

newmenu Demo // If in-game (playing demos isn't needed)

menuitem "Start recording a demo"	"recorddemo"
menuitem "Stop recording a demo"	"stopdemo"
menuitem "Download demos from the server"	[ listdemos; showmenu "Download demo" ] // Lists the demos, then asks which would like to be downloaded.


newmenu "Download demo"
menuinit [ echo "4Choose the demo number you wish to download, as show below in the console." ]
menuitemtextinput "Demo number:  "	"" "alias dldemo $arg1"
menuitem "2	      [ Download ]		" "getdemo $dldemo"



newmenu "Play demo"	// If not in-game (recording/downloading demos isn't needed)
menuinit [ echo "To stop demo playback, type: 3/stopdemo" ]
menudirlist "demos/" "dmo" "demo $arg1"

// in-game menu that opens when pressing escape while watching a demo.
newmenu "Watching demo"
menuitem "Stop watching demo" "stopdemo"
menuitem "Restart demo" "demo $_demofile"
menuitem "Watch other demo" [stopdemo; closemenu "Watching demo"; showmenu "Play demo"]
menuitem "" -1
menuitem "4Main menu..."		[ closemenu "Watching demo"; showmenu main ]
menuitem "3Quit AssaultCube"		"savequit"

newmenu about

menuitem "AssaultCube v1.0" -1
menuitem "                     ...Help"		"showmenu help"
menuitem "                     ...Credits"	"showmenu Credits"
if $mappack_version [ menuitem "                     ...Map-pack credits" [ showmenu "about mappack" ]];
menuitem "" -1
menuitem "by 'Rabid Viper Productions'" "showmenu Credits"
menuitem "1http://assault.cubers.net/" -1			// URL's are colourised blue, like a hyperlink normally is...
menuitem "" -1
menuitem "AssaultCube is a total-conversion of the CUBE engine" -1
menuitem "...by Wouter 'Aardappel' van Oortmerssen, and others." -1
menuitem "1http://www.cubeengine.com/" -1
menuinitselection 2

newmenu help

menuitem "AssaultCube reference"	"showmenu reference"
menuitem "Search the reference"		[ showmenu "Reference search" ]
menuitem "Keyboard controls"			"showmenu controls"
menuitem "" -1
menuitem "...for further information/help see the README" "echo 2The readme can be found in the base AssaultCube directory."

newmenu "Reference search"
menuinit [ alias docsearchstring "" ]
menuitemtextinput "Search reference for:  "	"" "alias docsearchstring $arg1"
menuitem "2		  [ Search ]			" "docfind $docsearchstring"


newmenu Credits

menuitem "Project Leaders" -1
menuitem "-----------------" -1
menuitem "driAn				Lead coder, OpenAL, OpenGL, gameplay code." -1
menuitem "makkE				Lead artist, models, skins, animations," -1
menuitem "				mapping, 2D-art, textures, sounds." -1
menuitem "" -1
menuitem "Active Developers/Contributors" -1
menuitem "-----------------------------------" -1
menuitem "eihrul				Coder, OpenGL expert, Enet Library, Cube2 backporting." -1
menuitem "RandumKiwi			Mapping, documentation, tester, clean-up crew." -1
menuitem "Flowtron			Universal team member, additional code, admin, community chief." -1
menuitem "stef				Bug fixes, additional code, server stuff, new modes." -1
menuitem "Toca				Mapmodels, sounds, textures, other stuff." -1
menuitem "" -1
menuitem "Community Mappers" -1
menuitem "-----------------------" -1
menuitem "Shadow			Map: ac_elevation." -1
menuitem "Wotwot				Map: ac_power, plus textures." -1
menuitem "daMfr0				Map: ac_snow." -1
menuitem "MitaMAN			Map: ac_depot, plus textures." -1
menuitem "Nieb				Map: ac_desert2, ac_desert3, plus mapmodels, 2D-art and hosting." -1
menuitem "Archangel			Map: ac_urban." -1
menuitem "Mr.Floppy			Map: ac_keller, plus textures." -1
menuitem "DogDancing			Map: ac_shine, ac_scaffold, textures." -1
menuitem "R4zor				Map: ac_sunset, ac_gothic." -1
menuitem "Halo				Map: ac_arctic." -1
menuitem "" -1
menuitem "Special thanks" -1
menuitem "----------------" -1
menuitem "Aardappel & others		The Cube Game/Engine." -1
menuitem "Arghvark			Previous project leader, game concept, code." -1
menuitem "Verbal_				Q&A, advisor, lead tester, pro-coffee service." -1
menuitem "Rick Helmus			Bot code." -1
menuitem "absinth				Packaging AssaultCube for Mac." -1
menuitem "dtd				Hosting." -1
menuitem "Grenadier (aurhat)		Small code contributions/fixes." -1
menuitem "KanslozeClown			Code contributions and advice." -1
menuitem "Chris Robinson			OpenAL-Soft advice." -1
menuitem "lewiscommunications.com	Logo, media and web support." -1
menuitem "" -1
menuitem "Resources" -1 
menuitem "-----------" -1
menuitem "JCDPC				Laptop mapmodel, textures." -1
menuitem "Topher				Some crosshairs." -1
menuitem "leileilol				Bullethole image." -1
menuitem "Steini				Skyboxes." -1
menuitem "Antiklimax			Sniper scope." -1
menuitem "SimonOC			Nightball/Graveyard skymap." -1
menuitem "LadyNightHawk		 	InhCanyons skymap." -1
menuitem "Sock 				Iceflow skymap." -1
menuitem "HitmanDaz[MT]		Playermodels" -1
menuitem "" -1
menuitem "Texture sources" -1
menuitem "------------------" -1
menuitem "Articool, Boeck, Craig Fortune, Digital Flux, mayang.com, imageafter.com, " -1
menuitem "Craig Fortune, Digital Flux, mayang.com, afflict.net, Rohrschach, Lemog 3D," -1
menuitem "Golgotha team, NOCTUA, Chris Zastrow, 3D Cafe, Kurt Keslar, John Solo," -1
menuitem "drunkenM, www.openfootage.com." -1
menuitem "" -1
menuitem "Sound sources" -1
menuitem "----------------" -1
menuitem "DCP, wildweasel (Vote sounds), Tremulous team (Gib sound), mwl500, fonogeno," -1
menuitem "Lukas Zapletal & Ludek Horacek (Music), livindead, NoiseCollector, droboide," -1
menuitem "nicStage, acclivity, Syna Max, ermine, ReWired, nofeedbak, vuzz, mich3d," -1
menuitem "Rhedcerulean, www.soundsnap.com, dommygee, fresco, WIM, ignotus, acclivity, Bahutan" -1
menuitem "" -1
menuitem "Also thanks to kurtis84, player1, quase, exis, talou and others for testing." -1
menuitem "Thanks to flowtron and exis for organising the 0.93 AssaultCube Release Cup." -1


// Show quit dialog if enabled
newmenu quit
menuitem "Yes, quit now" "quit"
menuitem "No" "showmenu "" "
menuitem "" -1
menuitemcheckbox "Don't ask next time: " "(= $askquit 0)" "askquit = (= $arg1 0)"

alias savequit [
    if (= $askquit 1) [ showmenu quit ] [ quit ]
]

// Create additional menus...
exec config/menus_bot.cfg
exec config/menus_edit.cfg
exec config/menus_settings.cfg
exec config/menus_multiplayer.cfg
exec config/favourites.cfg

