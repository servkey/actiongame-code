// bot menus and tools

alias tmp_botskill good
alias tmp_numbots 1
alias tmp_mode
alias tmp_botmap

alias startbotmatch [
	addnbot (div $tmp_numbots 2) RVSF $tmp_botskill
	if ((> (mod $tmp_numbots 2) 0)) [ alias tmp_numbots (+ $tmp_numbots 1) ] []
	addnbot (div $tmp_numbots 2) CLA $tmp_botskill
]

alias startbotmap [
	if $connected [ disconnect ]
	echo starting botmatch..
    kickallbots
	sleep 5000 startbotmatch
	mode $tmp_mode
	map $tmp_botmap
]

newmenu singleplayer

// teamplay note mature yet
menuitem "Bot Team Deathmatch"				"alias tmp_mode 7; showmenu botskill"
menuitem "Bot Deathmatch"					"alias tmp_mode 8; showmenu botskill"
menuitem "Bot One Shot, One Kill"           "alias tmp_mode 12; showmenu botskill"
menuitem "Empty Map"                        "mode 0; showmenu maps"

newmenu botskill

alias showmenu_enemies [ if (= $tmp_mode 7) [ showmenu "team enemies" ] [ showmenu enemies ] ]
menuitem "best" "alias tmp_botskill best; showmenu_enemies"
menuitem "good (default)" "alias tmp_botskill good; showmenu_enemies"
menuitem "medium" "alias tmp_botskill medium; showmenu_enemies"
menuitem "worse" "alias tmp_botskill worse; showmenu_enemies"
menuitem "bad" "alias tmp_botskill bad; showmenu_enemies"


alias genenemyitems [
	loop i (listlen $arg1) [
		alias numplayers (at $arg1 $i)
		if (= $arg2 0) [ // DM
			alias numplayers (- $numplayers 1) // don't count yourself as enemy
			if (= $numplayers 1) [
				alias menutext (concat $numplayers enemy)
			] [
				alias menutext (concat $numplayers enemies)
			]
		] [ // TDM
			alias teamsize (div $numplayers 2)
			alias menutext (concatword $teamsize on $teamsize)
		]
		menuitem $menutext (concat "alias tmp_numbots" $numplayers "; showmenu botmaps")
	]
]

newmenu enemies
genenemyitems "2 3 5 9 17 33" 0

newmenu "team enemies"
genenemyitems "2 4 6 8 16 32" 1


newmenu botmaps

alias genbotmaps [
	loop i (listlen $arg1) [
		alias listmapname (at $arg1 $i)
		alias menutext $listmapname (concat map $listmapname)
		menuitem $menutext (concat "alias tmp_botmap" $listmapname "; startbotmap")
	]
]

genbotmaps "ac_complex ac_mines ac_depot ac_desert ac_desert2 ac_snow ac_power ac_elevation ac_toxic"


newmenu "Creating bot waypoints"

menuitem "Waypoints..."			[ showmenu "Waypoints" ]
menuitem "Paths..."			[ showmenu "Paths" ]
menuitem "Other operations..."		[ showmenu "Other bot operations" ]
menuitem """"
menuitem "Flood map with waypoints"	"wpflood"
menuitem "Save bot waypoints"		[ wpsave; echo "Waypoints saved in ...bot\waypoints" ]


newmenu Waypoints

menuitem "Add waypoint"				"addwp 0"
menuitem "Add auto-connecting waypoint"		"addwp 1"
menuitem """"
menuitem "Delete waypoint"			"delwp"
menuitem "Delete all waypoints"			[ showmenu "Delete all waypoints?" ]


newmenu Paths

menuitem "Create Start of 2-way path"			"addpath2way1"
menuitem "Create End of 2-way path"			"addpath2way2"
menuitem "Delete Start of 2-way path"		"delpath2way1"
menuitem "Delete End of 2-way path"		"delpath2way2"
menuitem """"
menuitem "Create Start of 1-way path"			"addpath1way1"
menuitem "Create End of 1-way path"			"addpath1way2"
menuitem "Delete Start of 1-way path"		"delpath1way1" 
menuitem "Delete End of 1-way path"		"delpath1way2"


newmenu "Other bot operations"

menuitem "Make waypoints visible"		"wpvisible 1"
menuitem "Make waypoints invisible"		"wpvisible 0"
menuitem """"
menuitem "Set waypoint as jumpable"		"setjumpwp"
menuitem "Unset waypoint as jumpable"		"unsetjumpwp"
menuitem "Set waypoint direction (yaw)"		"setwpyaw"
menuitem """"
menuitem "Select waypoints by clicking"		"xhairwpsel 1"
menuitem "Select waypoints by the nearest one"	"xhairwpsel 0"


newmenu "Delete all waypoints?"

menuitem "Yes, delete all waypoints"		"wpclear"
menuitem "No. Leave my waypoints alone!"	"showmenu botedit"