newmenu settings

menuitem "quick setup.."                                            [ showmenu "quick setup" ]
menuitem "keyboard/mouse controls"                                  "showmenu controls"
menuitem "video settings"                                           "showmenu video"
menuitem "sound settings"                                           "showmenu sound"


newmenu "quick setup"

menuitemtextinput "nickname: " "" "name $arg1"
menuitemtextinput "screen width: " "$scr_w" "scr_w $arg1"
menuitemtextinput "screen height: " "$scr_h" "scr_h $arg1"
menuitemslider "mouse sensitivity: " 2 100 "($sensitivity)" 2 "" "sensitivity $arg1"
menuitemslider "graphics detail: " 1 4 "(getgfxq)" 1 "low medium good best" "new_gfx_quality $arg1"
menuitemslider "sound detail: " 1 3 "(getsoundq)" 1 "low medium high" "new_sound_quality $arg1"
menuitem "OK" "showmenu restart" 

alias getgfxq [
    if (= $minlod 200) [ result 4 ] [
        if (= $minlod 100) [ result 3 ] [
            if (= $minlod 60) [ result 2 ] [ result 1 ]
        ]
    ]
]

alias getsoundq [
    if (= $soundchans 64) [ result 3 ] [
        if (= $footsteps 1) [ result 2 ] [ result 1 ]
    ]
]

alias new_gfx_quality [
    if (= $arg1 4) [ // highest gfx quality
        fsaa 8
        minlod 200
        fpsrange 100 1000
        watersubdiv 2
        dynlight 16
        waterreflect 1
        dynshadow 40
        lighterror 1
        scorchttl 10000
        bulletholettl 10000
        bloodttl 10000
        gibttl 5000
        shotlinettl 75
    ] [
        if (= $arg1 3) [ // high
            fsaa 0
            minlod 100
            fpsrange 60 60
            watersubdiv 2
            dynlight 16
            waterreflect 1
            dynshadow 40
            lighterror 4
            scorchttl 10000
            bulletholettl 10000
            bloodttl 10000
            gibttl 5000
            shotlinettl 75            
        ] [
            if (= $arg1 2) [ // medium (DEFAULT)
                fsaa 0
                minlod 60
                fpsrange 30 40
                watersubdiv 4
                dynlight 16
                waterreflect 1
                dynshadow 40
                lighterror 4
                scorchttl 10000
                bulletholettl 10000
                bloodttl 10000
                gibttl 5000
                shotlinettl 75                
            ] [                 // low
                fsaa 0
                minlod 25
                fpsrange 20 25
                watersubdiv 16
                dynlight 0
                waterreflect 0
                dynshadow 0
                lighterror 10
                scorchttl 0
                bulletholettl 0
                bloodttl 0
                gibttl 0
                shotlinettl 0                
            ]
        ]
    ]
]
        
alias new_sound_quality [
    if (= $arg1 3) [ // high sound (DEFAULT)
        soundchans 64
        maxsoundsatonce 40
        footsteps 1
        bulletairsound 1
        bulletbouncesound 1
    ] [
        if (= $arg1 2) [ // medium
            soundchans 32
            maxsoundsatonce 10
            footsteps 1
            bulletairsound 0
            bulletbouncesound 0
        ] [                         // low
            soundchans 32
            maxsoundsatonce 5
            footsteps 0
            bulletairsound 0
            bulletbouncesound 0
        ]
    ]
]

newmenu restart
menuitem "You need to restart AssaultCube" "quit"


newmenu controls

menuitem "Select an action and press ENTER to set a new key-binding"
menuitem ""
menuitemkeyinput "forward: "        forward
menuitemkeyinput "left: "           left
menuitemkeyinput "backward: "       backward
menuitemkeyinput "right: "          right
menuitemkeyinput "attack: "         attack
menuitemkeyinput "special action: " altaction
menuitemkeyinput "jump: "           jump
menuitemkeyinput "crouch: "         crouch
menuitemkeyinput "reload: "         reload
menuitemkeyinput "weapon menu: "    "showmenu weapons"
menuitemkeyinput "next weapon: "     "universaldelta  1"
menuitemkeyinput "previous weapon: " "universaldelta -1"
menuitemkeyinput "show scores: "    showscores
menuitemkeyinput "chat: "           saycommand
menuitemkeyinput "team chat: "      "saycommand %"
menuitemkeyinput "commandline: "    "saycommand /"
menuitemkeyinput "console output: " toggleconsole
menuitemkeyinput "screenshot: "     screenshot
menuitemkeyinput "map overview: "   toggleshowmap
menuitemkeyinput "drop CTF flag: "  dropflag
menuitem ""
menuitemcheckbox "invert mouse: " "$invmouse" "invmouse $arg1"
menuitemslider "mouse sensitivity: " 2 100 "($sensitivity)" 2 "" "sensitivty $arg1"


newmenu video

menuitemtextinput "screen width: " "$scr_w" "scr_w $arg1"
menuitemtextinput "screen height: " "$scr_h" "scr_h $arg1"

alias fsaa_valuemap "0 2 4 8 16"
menuitemslider "antialiasing (FSAA): " 0 4 "(findlist $fsaa_valuemap $fsaa)" 1 "off 2 4 8 16" "fsaa (at $fsaa_valuemap $arg1)"
menuitemslider "gamma: " 30  300 "$gamma"  5 "" "gamma $arg1"

alias minlod_valuemap "25 60 100 250"
menuitemslider "minimal level of detail: " 25 250 "(findlist $minlod_valuemap $minlod)" 5 ["low" "decent" "good" "best"] "minlod (at $minlod_valuemap $arg1)"
menuitemcheckbox "water reflection: " "$waterreflect" "waterreflect $arg1"

alias watersubdiv_valuemap "16 8 4 2 1"
menuitemslider "water subdivision: " 0 4 "(findlist $watersubdiv_valuemap $watersubdiv)" 1 ["lowest quality" "low quality" "medium quality" "high quality" "highest quality"] "watersubdiv (at $watersubdiv_valuemap $arg1)"

menuitemcheckbox "dynamic light: " "$dynlight" [ if (= $arg1 1) [ dynlight 16 ] [ dynlight 0 ] ]
menuitemcheckbox "dynamic player shadows: " "$dynshadow" [ if (= $arg1 1) [ dynshadow 40 ] [ dynshadow 0 ] ]
menuitemslider "light error: " 1 100 "$lighterror" 5 "" "lighterror $arg1"
menuitem "fpsrange.." "showmenu fpsrange"

newmenu fpsrange

menuitem "my 486 0wnz y00 (8-10)"        "fpsrange 8 10"
menuitem "slow machine (20-25)"          "fpsrange 20 25"
menuitem "sensible default (30-40)"      "fpsrange 30 40"
menuitem "fps whore (60-60)"             "fpsrange 60 60"
menuitem "I don't understand LOD (100+)" "fpsrange 100 1000"